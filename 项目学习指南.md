# 🚀 污水处理监测系统 - 项目学习指南

## 📋 学习目标
通过这个项目，你需要掌握：
1. **微服务架构设计思想**
2. **Spring Boot + Spring Cloud技术栈**
3. **实时数据处理（WebSocket + Kafka）**
4. **Redis缓存实战应用**
5. **前后端分离开发模式**

## 🗺️ 项目学习路径（建议按顺序学习）

### 阶段一：理解项目基础架构（1-2天）

#### 1.1 项目整体结构理解
```
lab-data-platform/
├── common/           # 公共模块 - 所有服务都会用到的基础代码
├── auth-service/     # 认证服务 - 处理用户登录、权限验证
├── gateway-service/  # 网关服务 - 统一入口、路由转发、认证过滤
├── monitor-service/  # 监控服务 - 核心业务：数据采集、实时监控、告警
└── system-service/   # 系统服务 - 实验室信息管理
```

#### 1.2 技术栈理解（必须掌握）
- **Spring Boot 2.7.10**: Java微服务开发框架
- **Spring Cloud**: 微服务治理（服务注册、配置中心、网关）
- **MySQL**: 关系型数据库，存储业务数据
- **Redis**: 缓存数据库，提升查询性能
- **Kafka**: 消息队列，异步处理和系统解耦
- **WebSocket**: 实时双向通信
- **MyBatis Plus**: 数据库操作框架

#### 1.3 核心业务流程理解
```
传感器数据采集 → Kafka消息队列 → 监控服务处理 → 数据库存储
                                        ↓
                                   WebSocket推送 → 前端实时显示
```

### 阶段二：从认证服务开始（2-3天）

#### 2.1 先理解用户认证流程
**文件学习顺序**：
1. `common/src/main/java/com/sewage/common/entity/User.java` - 用户实体
2. `common/src/main/java/com/sewage/common/util/JwtUtil.java` - JWT工具类
3. `auth-service/src/main/java/com/sewage/auth/controller/AuthController.java` - 认证接口
4. `auth-service/src/main/java/com/sewage/auth/service/AuthService.java` - 认证业务逻辑

**关键学习点**：
- JWT token的生成和验证过程
- 用户密码的加密存储
- Spring Security的基本概念

#### 2.2 实战练习
试着自己写一个简单的登录接口：
1. 接收用户名密码
2. 验证用户信息
3. 生成JWT token返回

### 阶段三：网关服务理解（1-2天）

#### 3.1 网关的核心作用
**文件学习顺序**：
1. `gateway-service/src/main/java/com/sewage/gateway/filter/AuthFilter.java` - 认证过滤器

**关键学习点**：
- 网关如何统一处理认证
- 请求路由和转发机制
- 请求拦截和过滤

#### 3.2 实战练习
画出你的认证流程图：
```
前端请求 → 网关 → 验证token → 转发到具体服务
```

### 阶段四：监控服务核心（3-5天）- 最重要的部分

#### 4.1 数据采集流程
**文件学习顺序**：
1. `monitor-service/src/main/java/com/sewage/monitor/entity/LabEnvironmentData.java` - 环境数据实体
2. `monitor-service/src/main/java/com/sewage/monitor/controller/MonitorController.java` - 数据上传接口
3. `monitor-service/src/main/java/com/sewage/monitor/service/LabEnvironmentDataService.java` - 核心业务逻辑

**关键学习点**：
- 数据如何接收和验证
- 缓存策略的实现（Redis）
- 数据持久化到MySQL

#### 4.2 告警处理流程
**文件学习顺序**：
1. `monitor-service/src/main/java/com/sewage/monitor/entity/LabAlarm.java` - 告警实体
2. `monitor-service/src/main/java/com/sewage/monitor/service/AlarmService.java` - 告警处理逻辑

**关键学习点**：
- 告警规则的定义
- 告警触发条件判断
- 告警级别分类

#### 4.3 消息队列Kafka
**文件学习顺序**：
1. `monitor-service/src/main/java/com/sewage/monitor/kafka/producer/LabEnvironmentProducer.java` - 消息生产者
2. `monitor-service/src/main/java/com/sewage/monitor/kafka/consumer/LabEnvironmentDataConsumer.java` - 消息消费者

**关键学习点**：
- Kafka的发布订阅模式
- 异步处理的优势
- 系统解耦设计

#### 4.4 WebSocket实时推送
**文件学习顺序**：
1. `monitor-service/src/main/java/com/sewage/monitor/websocket/WebSocketServer.java` - WebSocket服务端
2. `monitor-service/src/main/java/com/sewage/monitor/service/WebSocketPushService.java` - 推送服务

**关键学习点**：
- WebSocket连接建立过程
- 实时数据推送机制
- 连接状态管理

### 阶段五：Redis缓存实战（2-3天）

#### 5.1 缓存策略理解
**文件学习顺序**：
1. `monitor-service/src/main/java/com/sewage/monitor/service/CacheService.java` - 缓存服务
2. `monitor-service/src/main/java/com/sewage/monitor/config/RedisConfig.java` - Redis配置

**关键学习点**：
- 缓存击穿、穿透、雪崩的解决方案
- 不同数据结构的适用场景
- 缓存更新策略

### 阶段六：数据库设计理解（2天）

#### 6.1 表结构理解
关键表设计：
```sql
user - 用户表
laboratory - 实验室表
lab_environment_data - 环境数据表
lab_alarm - 告警表
lab_daily_statistics - 统计表
```

## 🎯 面试准备要点

### 1. 技术亮点（必说）
- **微服务架构**：为什么要用微服务？解决了什么问题？
- **实时监控**：WebSocket + Kafka的技术选型理由
- **缓存策略**：Redis在项目中的具体应用和优化
- **异步处理**：Kafka消息队列的异步解耦设计

### 2. 项目难点（重点准备）
- **高并发数据处理**：如何保证数据不丢失？
- **实时性要求**：WebSocket连接管理的心跳机制
- **缓存一致性**：如何保证缓存和数据库数据一致？
- **系统稳定性**：服务降级、熔断机制

### 3. 可以优化的地方
- **监控告警**：规则可配置化
- **数据可视化**：集成ECharts图表
- **权限管理**：细粒度的RBAC权限控制
- **性能优化**：数据库查询优化、缓存策略优化

## 📚 建议学习方法

### 1. 先看懂再动手
- 每个类先理解它的职责
- 画出类之间的关系图
- 理解数据流转过程

### 2. 逐步重构
- 先能看懂代码
- 然后尝试修改小功能
- 最后能独立写新功能

### 3. 重点突破
选择1-2个核心模块深入研究：
- 推荐：WebSocket实时推送 + Redis缓存
- 或者：Kafka消息队列 + 告警处理

## 🚨 学习提醒

1. **不要贪多**：一次只学一个模块
2. **多画图**：架构图、流程图、时序图
3. **动手实践**：运行代码、打断点调试
4. **记录笔记**：整理学习心得和技术点

记住：面试官更看重的是你对技术的理解和解决问题的思路，而不是你记得多少代码细节！

---

开始学习吧！建议从**阶段二：认证服务**开始，这是理解整个系统的基础。